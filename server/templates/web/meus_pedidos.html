{% extends "base.html" %}
{% block content %}
  <h1>Meus Pedidos</h1>

  {% for pedido in pedidos %}
    <div class="pedido">
      <h2>Pedido #{{ pedido.id }} – {{ pedido.criado_em|date:"d/m/Y H:i" }}</h2>
      <p>Status: {{ pedido.status }}</p>
      <p>Total: R$ {{ pedido.total }}</p>
      <ul>
        {% for item in pedido.itens.all %}
          <li>{{ item.quantidade }}× {{ item.produto.nome }} — R$ {{ item.preco_unitario }}</li>
        {% endfor %}
      </ul>
    </div>
  {% empty %}
    <p>Você ainda não fez nenhum pedido.</p>
  {% endfor %}

  {% if is_paginated %}
    <nav>
      {% if page_obj.has_previous %}
        <a href="?page={{ page_obj.previous_page_number }}">&laquo; anterior</a>
      {% endif %}
      <span>página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}</span>
      {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}">próxima &raquo;</a>
      {% endif %}
    </nav>
  {% endif %}
{% endblock %}
